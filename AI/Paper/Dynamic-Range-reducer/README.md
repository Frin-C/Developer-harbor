# 【动态范围压缩算法】问题

## 课题简介
该课题根据论文《Dynamic Range Reduction via Branch-and-Bound》中提出的基于马尔可夫决策过程（MDP）和分支定界（Branch-and-Bound, B&B）策略进行动态范围压缩。

## 项目结构
```
Dynemic_Range_reducer/                          # 项目目录
├── README.md                                   # 项目说明文档
├── requirements.txt                            # 依赖包列表
└── main.py                                     # 主程序入口
```

## 使用方法

1. 安装依赖：

```bash
pip install -r requirements.txt
```

2. 运行示例：

## 算法说明

基于马尔可夫决策过程应用分支定界策略的动态范围压缩算法：

- 算法原理  
  #### **1. 问题建模（MDP框架）**
  - **目标**：降低 QUBO 矩阵 $Q$ 的动态范围 $DR(Q)$，同时保持原始最优解不变：

    $$
    DR(Q) = \log_2 \left( \frac{\widehat{D}(U(Q))}{\check{D}(U(Q))} \right)
    $$

    - $\widehat{D}$：矩阵元素最大绝对差值  
    - $\check{D}$：最小绝对差值  

  - **MDP 五要素**：
    - **状态 $S$**：当前 QUBO 矩阵 $Q_t$  
    - **动作 $A$**：选择元素 $(k,l)$ 及调整量 $w \in [y^-(Q), y^+(Q)]$  
    - **转移函数 $f$**：$Q_{t+1} = Q_t + w \cdot e_k e_l^T$  
    - **奖励 $r$**：$DR(Q_t) - DR(Q_{t+1})$（即时动态范围缩减量）  
    - **策略 $\pi^*$**：

      $$
      V^{\pi^*}(s_t) = \max_a \left[ r(s_t,a) + V^{\pi^*}(f(s_t,a)) \right]
      $$

  #### **2. 分支定界策略**
  - **分支**：
    - **ALL 策略**：对所有元素 $(k,l)$ 执行调整  
    - **IMPACT 策略**：优先调整对 $DR$ 影响最大的 4 个元素（最大、最小值及差值最小的相邻对）  

  - **合法区间 $[y^-, y^+]$**：保证调整后 $Q'$ 的最优解包含原最优解：
    - 若 $0 \in [y^-, y^+]$，设 $w = -Q_{kl}$（节省硬件资源）  
    - 否则取区间边界值  

- **定界剪枝**：
  - 计算 $DR$ 下界：

    $$
    \check{r}(Q,T) = \log_2 \left( \frac{\check{b}(Q,T)}{\widehat{b}(Q,T)} \right)
    $$

    - $\check{b}(Q,T)$：$T$ 步后最大差值的最小可能值  
    - $\widehat{b}(Q,T)$：合并最小相邻差值迭代 $T$ 次后的结果  

  - 若 $\check{r}(Q,T) \geq$ 当前最优 $DR$，剪枝  

- 实现细节  
  1. **初始化**：输入原始 QUBO 矩阵 $Q$，设置最大迭代次数 $T_{\text{max}}$  
  2. **分支**：  
     - 对当前 $Q$，按 IMPACT 策略选择 4 个候选元素 $(k,l)$  
     - 计算每个元素的合法区间 $[y^-, y^+]$（基于子问题上下界）  
  3. **动作选择**：  
     - 若 $0$ 在区间内，设 $w = -Q_{kl}$  
     - 否则取 $w = y^+$（当 $Q_{kl} < 0$）或 $w = y^-$（当 $Q_{kl} \geq 0$）  
  4. **剪枝**：  
     - 计算子状态的 $\check{r}(Q,T)$，丢弃劣于当前最优的状态  
  5. **迭代**：对未剪枝的状态递归执行步骤 2–4，直到 $T_{\text{max}}$ 或收敛  

- 关键步骤  
  - **子问题上下界**：使用局部搜索（上界）和 Roof-Duality 算法（下界）避免 NP 难计算  
  - **差值合并**：通过排序和差值合并快速更新 $\widehat{b}(Q,T)$  

- 性能分析

## 作者信息
- 作者姓名：陈福林
- 联系方式：17839870193@163.com